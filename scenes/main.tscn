[gd_scene load_steps=35 format=3 uid="uid://cdmo4ma55a7pw"]

[ext_resource type="Script" path="res://scenes/main.gd" id="1_88fyu"]
[ext_resource type="PackedScene" uid="uid://c4v861ioa1j71" path="res://levels/level_0.tscn" id="2_1x5lo"]
[ext_resource type="Texture2D" uid="uid://cusutbfuoduni" path="res://assets/Frame.png" id="5_036ah"]
[ext_resource type="PackedScene" uid="uid://cjn13vk3s3scj" path="res://commandBlocks/move_foreward.tscn" id="5_rmmfj"]
[ext_resource type="PackedScene" uid="uid://cbhwunh0kj2ac" path="res://commandBlocks/rotate_right.tscn" id="6_iwd40"]
[ext_resource type="PackedScene" uid="uid://bhb203ih5nh1a" path="res://commandBlocks/rotate_left.tscn" id="7_5j4hy"]
[ext_resource type="FontFile" uid="uid://dlcro7m7msi18" path="res://assets/fonts/Perfect DOS VGA 437 Win.ttf" id="7_qt7pa"]
[ext_resource type="PackedScene" uid="uid://cqn3lgd5dc7qv" path="res://commandBlocks/ghost_code.tscn" id="7_y1o0r"]
[ext_resource type="PackedScene" uid="uid://dxog7jilarogj" path="res://commandBlocks/repeat_end.tscn" id="8_kwj4s"]
[ext_resource type="Shader" path="res://scenes/CRT.gdshader" id="9_0fktg"]
[ext_resource type="Script" path="res://scenes/CodePicker.gd" id="9_8h2ai"]
[ext_resource type="Script" path="res://scenes/WinPanel.gd" id="10_sv06f"]
[ext_resource type="Script" path="res://scenes/CRTFilter.gd" id="11_b37ah"]
[ext_resource type="Script" path="res://scenes/GameSpeed.gd" id="13_cpefg"]
[ext_resource type="Script" path="res://scenes/RunButton.gd" id="13_ohqwf"]
[ext_resource type="FontFile" uid="uid://cckot5eydccnm" path="res://assets/fonts/dogica.otf" id="15_k210x"]
[ext_resource type="Texture2D" uid="uid://bwbasq8ag8m7u" path="res://assets/Arrow-Right-1-icon.png" id="16_4o0c0"]
[ext_resource type="Script" path="res://scenes/Settings.gd" id="17_3il0j"]
[ext_resource type="FontFile" uid="uid://cmneu8yi1l5tw" path="res://assets/fonts/VCR_OSD_MONO_1.001.ttf" id="17_rud7c"]
[ext_resource type="Texture2D" uid="uid://gy0031xnew1m" path="res://assets/cog.png" id="18_30c18"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3tq1l"]
bg_color = Color(0.243137, 0.156863, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_e4b2b"]
bg_color = Color(0.917647, 0.415686, 0.658824, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_gcba2"]
bg_color = Color(0.486275, 0.670588, 0, 0)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_2s7jx"]
shader = ExtResource("9_0fktg")
shader_parameter/crt_curve = 0.0
shader_parameter/crt_scan_line_color = 0.581
shader_parameter/aperture_grille_rate = 1.0
shader_parameter/rf_switch_esque_blur = 0.0
shader_parameter/white_noise_rate = 0.05

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sucy6"]
size = Vector2(826, 730)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_h24x4"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_jo2r5"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_sjclc"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_v5rhp"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_vw5dc"]
bg_color = Color(0.243137, 0.156863, 0, 1)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_00llb"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_y4iek"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_vv87m"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_uxyg5"]

[node name="Main" type="Node2D"]
script = ExtResource("1_88fyu")

[node name="Level" type="Node2D" parent="."]

[node name="Level0" parent="Level" instance=ExtResource("2_1x5lo")]
initialCharPos = Vector2i(8, 1)
initialCharRot = 90

[node name="GUI" type="CanvasLayer" parent="."]

[node name="RepeatEnd" parent="GUI" instance=ExtResource("8_kwj4s")]
visible = false
offset_left = 131.276
offset_top = 128.0
offset_right = 341.276
offset_bottom = 148.0

[node name="GhostCode" parent="GUI" instance=ExtResource("7_y1o0r")]
visible = false
offset_left = 960.0
offset_top = 240.0
offset_right = 1280.0
offset_bottom = 260.0

[node name="Background" type="Panel" parent="GUI"]
offset_left = 960.0
offset_right = 1280.0
offset_bottom = 720.0
theme_override_styles/panel = SubResource("StyleBoxFlat_3tq1l")

[node name="VSplitContainer" type="VSplitContainer" parent="GUI/Background"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 24.0
offset_top = 32.0
offset_right = -16.0
offset_bottom = 32.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/separation = 51
split_offset = 460
dragger_visibility = 1

[node name="Lines" type="ScrollContainer" parent="GUI/Background/VSplitContainer"]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_e4b2b")

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/Background/VSplitContainer/Lines"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 18

[node name="MoveForward" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("5_rmmfj")]
layout_mode = 2

[node name="MoveForward2" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("5_rmmfj")]
layout_mode = 2

[node name="MoveForward3" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("5_rmmfj")]
layout_mode = 2
theme_override_constants/margin_top = 0

[node name="RotateRight2" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("6_iwd40")]
layout_mode = 2

[node name="MoveForward4" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("5_rmmfj")]
layout_mode = 2

[node name="RotateRight" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("6_iwd40")]
layout_mode = 2

[node name="MoveForward5" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("5_rmmfj")]
layout_mode = 2

[node name="RotateLeft" parent="GUI/Background/VSplitContainer/Lines/VBoxContainer" instance=ExtResource("7_5j4hy")]
layout_mode = 2

[node name="Code" type="ScrollContainer" parent="GUI/Background/VSplitContainer"]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_gcba2")

[node name="CodePicker" type="VBoxContainer" parent="GUI/Background/VSplitContainer/Code"]
layout_mode = 2
script = ExtResource("9_8h2ai")

[node name="TopNinePatch" type="NinePatchRect" parent="GUI"]
top_level = true
z_index = 5
offset_left = 960.0
offset_top = 512.0
offset_right = 1010.0
offset_bottom = 545.0
scale = Vector2(6.3997, 6.3997)
texture = ExtResource("5_036ah")
region_rect = Rect2(0, 0, 64, 64)
patch_margin_left = 5
patch_margin_top = 5
patch_margin_right = 5
patch_margin_bottom = 5
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="BottomNinePatch" type="NinePatchRect" parent="GUI"]
top_level = true
z_index = 5
offset_left = 960.0
offset_right = 1010.0
offset_bottom = 80.0
scale = Vector2(6.3997, 6.3997)
texture = ExtResource("5_036ah")
region_rect = Rect2(0, 0, 64, 64)
patch_margin_left = 5
patch_margin_top = 5
patch_margin_right = 5
patch_margin_bottom = 5
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="CRTFilter" type="ColorRect" parent="GUI"]
z_index = 1
material = SubResource("ShaderMaterial_2s7jx")
offset_left = 976.0
offset_top = 16.0
offset_right = 1264.0
offset_bottom = 704.0
mouse_filter = 2
script = ExtResource("11_b37ah")

[node name="RunButton" type="Button" parent="GUI"]
offset_left = 808.0
offset_top = 568.0
offset_right = 944.0
offset_bottom = 704.0
focus_mode = 0
theme_override_font_sizes/font_size = 23
text = "RUN CODE"
clip_text = true
script = ExtResource("13_ohqwf")

[node name="DraggingZone" type="Control" parent="GUI"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DeathArea" type="Area2D" parent="GUI" groups=["Droppable"]]
visible = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="GUI/DeathArea"]
position = Vector2(403, 355)
shape = SubResource("RectangleShape2D_sucy6")

[node name="ErrorPanel" type="Panel" parent="GUI"]
visible = false
offset_left = 496.0
offset_top = 144.0
offset_right = 960.0
offset_bottom = 552.0

[node name="TextError" type="RichTextLabel" parent="GUI/ErrorPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/line_separation = 13
theme_override_fonts/normal_font = ExtResource("15_k210x")
bbcode_enabled = true
text = "
[center][font_size= 30][color= red] Oh nu![/color][/font_size][/center]

 [font_size= 18]Se pare ca este o eroare la blocul de cod 
evidentiat in rosu. 
 Cel mai probabil blocul de cod \"Repeta\" nu are un bloc de cod \"Inapoi\" care sa il inchida."

[node name="WinPanel" type="Panel" parent="GUI"]
visible = false
offset_left = 40.0
offset_top = 200.0
offset_right = 944.0
offset_bottom = 488.0
script = ExtResource("10_sv06f")

[node name="Congrats" type="RichTextLabel" parent="GUI/WinPanel"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 40.0
grow_horizontal = 2
theme_override_fonts/normal_font = ExtResource("7_qt7pa")
theme_override_font_sizes/normal_font_size = 40
bbcode_enabled = true
text = "[center] Felicitari!"

[node name="Text" type="RichTextLabel" parent="GUI/WinPanel"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = 88.0
offset_bottom = 192.0
grow_horizontal = 2
theme_override_fonts/normal_font = ExtResource("7_qt7pa")
theme_override_font_sizes/normal_font_size = 40
bbcode_enabled = true
text = "[center] TEXT TEXT"

[node name="NextLevel" type="Button" parent="GUI/WinPanel"]
layout_mode = 0
offset_left = 712.0
offset_top = 176.0
offset_right = 900.0
offset_bottom = 280.0
theme_override_fonts/font = ExtResource("7_qt7pa")
theme_override_font_sizes/font_size = 36
theme_override_styles/pressed = SubResource("StyleBoxEmpty_h24x4")
theme_override_styles/focus = SubResource("StyleBoxEmpty_jo2r5")
text = "Nivelul 
Urmator"

[node name="Replay" type="Button" parent="GUI/WinPanel"]
layout_mode = 0
offset_left = 8.0
offset_top = 176.0
offset_right = 196.0
offset_bottom = 280.0
theme_override_fonts/font = ExtResource("7_qt7pa")
theme_override_font_sizes/font_size = 36
theme_override_styles/pressed = SubResource("StyleBoxEmpty_sjclc")
theme_override_styles/focus = SubResource("StyleBoxEmpty_v5rhp")
text = "Reset"

[node name="Arrow" type="Sprite2D" parent="GUI"]
z_index = 5
z_as_relative = false
position = Vector2(944, 42)
scale = Vector2(0.109375, 0.109375)
texture = ExtResource("16_4o0c0")

[node name="GameSpeed" type="Panel" parent="GUI"]
offset_left = 664.0
offset_top = 568.0
offset_right = 800.0
offset_bottom = 704.0
script = ExtResource("13_cpefg")

[node name="Slider" type="HSlider" parent="GUI/GameSpeed"]
layout_mode = 0
offset_top = 104.0
offset_right = 136.0
offset_bottom = 128.0
focus_mode = 0
min_value = 0.1
max_value = 10.0
step = 0.1
value = 1.0
exp_edit = true
tick_count = 10
ticks_on_borders = true

[node name="Title" type="Label" parent="GUI/GameSpeed"]
layout_mode = 0
offset_right = 136.0
offset_bottom = 48.0
theme_override_fonts/font = ExtResource("15_k210x")
theme_override_font_sizes/font_size = 13
text = "Game Speed"
horizontal_alignment = 1
vertical_alignment = 1

[node name="GameSpeed" type="Label" parent="GUI/GameSpeed"]
layout_mode = 0
offset_top = 40.0
offset_right = 136.0
offset_bottom = 112.0
theme_override_fonts/font = ExtResource("15_k210x")
theme_override_font_sizes/font_size = 22
text = "10 x"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Settings" type="Panel" parent="GUI"]
offset_left = 16.0
offset_top = 98.0
offset_right = 944.0
offset_bottom = 552.0
theme_override_styles/panel = SubResource("StyleBoxFlat_vw5dc")
script = ExtResource("17_3il0j")

[node name="Titlu" type="Label" parent="GUI/Settings"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 94.0
grow_horizontal = 2
theme_override_fonts/font = ExtResource("17_rud7c")
theme_override_font_sizes/font_size = 42
text = "Setari"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Options" type="GridContainer" parent="GUI/Settings"]
layout_mode = 0
offset_left = 102.0
offset_top = 86.0
offset_right = 741.0
offset_bottom = 454.0
theme_override_constants/h_separation = 500
theme_override_constants/v_separation = 100
columns = 2

[node name="CRT" type="Panel" parent="GUI/Settings/Options"]
layout_mode = 2

[node name="CheckButton" type="CheckButton" parent="GUI/Settings/Options/CRT"]
layout_mode = 0
offset_left = 159.0
offset_top = -7.0
offset_right = 203.0
offset_bottom = 17.0
scale = Vector2(1.66523, 1.66523)
theme_override_styles/focus = SubResource("StyleBoxEmpty_00llb")
button_pressed = true

[node name="Label" type="Label" parent="GUI/Settings/Options/CRT"]
layout_mode = 0
offset_right = 99.0
offset_bottom = 23.0
scale = Vector2(1.6047, 1.6047)
theme_override_fonts/font = ExtResource("17_rud7c")
text = "Textura CRT"

[node name="CRT2" type="Panel" parent="GUI/Settings/Options"]
layout_mode = 2

[node name="CheckButton" type="CheckButton" parent="GUI/Settings/Options/CRT2"]
layout_mode = 0
offset_left = 159.0
offset_top = -7.0
offset_right = 203.0
offset_bottom = 17.0
scale = Vector2(1.66523, 1.66523)
theme_override_styles/focus = SubResource("StyleBoxEmpty_y4iek")

[node name="Label" type="Label" parent="GUI/Settings/Options/CRT2"]
layout_mode = 0
offset_right = 99.0
offset_bottom = 23.0
scale = Vector2(1.6047, 1.6047)
theme_override_fonts/font = ExtResource("17_rud7c")
text = "Textura CRT"

[node name="CRT3" type="Panel" parent="GUI/Settings/Options"]
layout_mode = 2

[node name="CheckButton" type="CheckButton" parent="GUI/Settings/Options/CRT3"]
layout_mode = 0
offset_left = 159.0
offset_top = -7.0
offset_right = 203.0
offset_bottom = 17.0
scale = Vector2(1.66523, 1.66523)
theme_override_styles/focus = SubResource("StyleBoxEmpty_vv87m")

[node name="Label" type="Label" parent="GUI/Settings/Options/CRT3"]
layout_mode = 0
offset_right = 99.0
offset_bottom = 23.0
scale = Vector2(1.6047, 1.6047)
theme_override_fonts/font = ExtResource("17_rud7c")
text = "Textura CRT"

[node name="CRT4" type="Panel" parent="GUI/Settings/Options"]
layout_mode = 2

[node name="CheckButton" type="CheckButton" parent="GUI/Settings/Options/CRT4"]
layout_mode = 0
offset_left = 159.0
offset_top = -7.0
offset_right = 203.0
offset_bottom = 17.0
scale = Vector2(1.66523, 1.66523)
theme_override_styles/focus = SubResource("StyleBoxEmpty_uxyg5")

[node name="Label" type="Label" parent="GUI/Settings/Options/CRT4"]
layout_mode = 0
offset_right = 99.0
offset_bottom = 23.0
scale = Vector2(1.6047, 1.6047)
theme_override_fonts/font = ExtResource("17_rud7c")
text = "Textura CRT"

[node name="CRTFilter2" type="ColorRect" parent="GUI/Settings"]
z_index = 1
material = SubResource("ShaderMaterial_2s7jx")
offset_left = 8.0
offset_top = 10.0
offset_right = 912.0
offset_bottom = 445.0
mouse_filter = 2
script = ExtResource("11_b37ah")

[node name="NinePatch" type="NinePatchRect" parent="GUI/Settings"]
top_level = true
z_index = 5
offset_left = 16.0
offset_top = 98.0
offset_right = 161.0
offset_bottom = 169.0
scale = Vector2(6.3997, 6.3997)
texture = ExtResource("5_036ah")
region_rect = Rect2(0, 0, 64, 64)
patch_margin_left = 5
patch_margin_top = 5
patch_margin_right = 5
patch_margin_bottom = 5
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="SettingsButton" type="TextureButton" parent="GUI"]
offset_left = 16.0
offset_top = 16.0
offset_right = 2064.0
offset_bottom = 2064.0
scale = Vector2(0.0400169, 0.0400169)
toggle_mode = true
texture_normal = ExtResource("18_30c18")

[node name="MainMenu" type="CanvasLayer" parent="."]

[connection signal="child_entered_tree" from="Level" to="GUI/Background/VSplitContainer/Code/CodePicker" method="_on_level_child_entered_tree"]
[connection signal="pressed" from="GUI/RunButton" to="." method="_on_run_button_pressed"]
[connection signal="pressed" from="GUI/RunButton" to="GUI/RunButton" method="_on_pressed"]
[connection signal="pressed" from="GUI/WinPanel/NextLevel" to="." method="_on_next_level_pressed"]
[connection signal="drag_ended" from="GUI/GameSpeed/Slider" to="GUI/GameSpeed" method="_on_slider_drag_ended"]
[connection signal="pressed" from="GUI/Settings/Options/CRT/CheckButton" to="GUI/Settings" method="_on_check_button_pressed"]
[connection signal="pressed" from="GUI/SettingsButton" to="GUI/Settings" method="_on_settings_button_pressed"]
